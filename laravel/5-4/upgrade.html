
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Upgrade Guide — Hello Laravel</title>
        <meta charset="utf-8">
        <meta name="description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Upgrade Guide — hello-laravel">
        <meta property="og:description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta property="og:image" content="https://hellolaravel.org//images/me.PNG">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Upgrade Guide — hello-laravel">
        <meta name="twitter:description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta name="twitter:image" content="https://hellolaravel.org/images/logo.png">

        <link rel="icon" href="/images/title.png" type="image/x-icon">

        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">
        <link rel="stylesheet" href="../css/my-css/my-canvas.css">
        <link rel="stylesheet" href="../../css/my-css/my-awesome.css">
        <link rel="stylesheet" href="../css/my-css/single-post.css">
        <link rel="stylesheet" href="../../css/grid.css">
        <link rel="stylesheet" href="../../css/custom-bootstrap/list-group.css">
        <link rel="stylesheet" href="../css/custom-bootstrap/card.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
        <link href="../../css/my-css/cheatsheet.css" rel="stylesheet"></head>

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>

        <script>window.PAGE_TYPE = "laravel 5.4"</script>



        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46852172-1', 'hellolaravel.org');
          ga('send', 'pageview');
        </script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logog.gif">
    <span>@HelloLaravel</span>
  </a>
  <ul id="nav">
    <li>
 <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>

</li>
<li><a href="/laravel/5-5/" class="nav-link current">laravel </a></li>
<li><a href="/bangla/lara" class="nav-link">laravel Bangla</a></li>

<li><a href="/developer/" class="nav-link">Developer</a></li>


<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Version</a><span class="arrow"></span>
  <ul class="nav-dropdown">
      <li><a href="/laravel/5-5" class="nav-link" >5.5</a></li>
      <li><a href="/laravel/5-4" class="nav-link" >5.4</a></li>

    </ul>



</li>

<!-- <li class="nav-dropdown-container language">
  <a class="nav-link">Official</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://laravel.com/" class="nav-link" target="">Laravel</a></li>
    <li><a href="https://laracasts.com/" class="nav-link" target="_blank">Laracast</a></li>
    <li><a href="https://laravel-news.com/blog" class="nav-link" target="_blank">Laravel News</a></li>
    <li><a href="https://larajobs.com/#/" class="nav-link" target="_blank">Larajob</a></li>
      <li><a href="http://cheats.jesse-obrien.ca/" class="nav-link" target="_blank">Cheat Sheet</a></li>
  </ul>
</li> -->



<li>
  <a href="https://medium.com/hello-laravel" target="_blank" class="nav-link shop">Blog</a>
  <span class="new-label">NEW!</span>
</li>

  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
 <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>

</li>
<li><a href="/laravel/5-5/" class="nav-link current">laravel </a></li>
<li><a href="/bangla/lara" class="nav-link">laravel Bangla</a></li>

<li><a href="/developer/" class="nav-link">Developer</a></li>


<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Version</a><span class="arrow"></span>
  <ul class="nav-dropdown">
      <li><a href="/laravel/5-5" class="nav-link" >5.5</a></li>
      <li><a href="/laravel/5-4" class="nav-link" >5.4</a></li>

    </ul>



</li>

<!-- <li class="nav-dropdown-container language">
  <a class="nav-link">Official</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://laravel.com/" class="nav-link" target="">Laravel</a></li>
    <li><a href="https://laracasts.com/" class="nav-link" target="_blank">Laracast</a></li>
    <li><a href="https://laravel-news.com/blog" class="nav-link" target="_blank">Laravel News</a></li>
    <li><a href="https://larajobs.com/#/" class="nav-link" target="_blank">Larajob</a></li>
      <li><a href="http://cheats.jesse-obrien.ca/" class="nav-link" target="_blank">Cheat Sheet</a></li>
  </ul>
</li> -->



<li>
  <a href="https://medium.com/hello-laravel" target="_blank" class="nav-link shop">Blog</a>
  <span class="new-label">NEW!</span>
</li>

    </ul>
    <div class="list">
        <div class="main-sponsor">
            <span>Platinum Sponsor</span><br>
            <a href="http://themezero.net" target="_blank" class="logo">
                <img src="/images/stdlib.png">
            </a>
        </div>
        <a class="become-backer" href="http://themezero.net" target="_blank">
            Template & Theme
        </a>
        <h2>
                Laravel 5.4

            </h2>
        <hr>
        <ul class="menu-root">
            
                
                
                
                    
                      <li><h3>Awesome Laravel</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/index.html" class="sidebar-link">Awesome Laravel (Chirag Gude)</a>
                </li>
            
                
                
                
                    
                    
                      <li><h3>Prologue</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/releases.html" class="sidebar-link">Release Notes</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/upgrade.html" class="sidebar-link current">Upgrade Guide</a>
                </li>
            
                
                
                
                    
                    
                    
                      <li><h3>Getting Started</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/installation.html" class="sidebar-link">Installation</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/configuration.html" class="sidebar-link">Configuration</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/structure.html" class="sidebar-link">Directory Structure</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/homestead.html" class="sidebar-link">Laravel Homestead</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/valet.html" class="sidebar-link">valet</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                      <li><h3>Architecture Concepts</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/lifecycle.html" class="sidebar-link">Request Lifecycle</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/container.html" class="sidebar-link">Service Container</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/providers.html" class="sidebar-link">Service Providers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/facades.html" class="sidebar-link">Facades</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                      <li><h3>The Basics</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/routing.html" class="sidebar-link">Routing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/errors.html" class="sidebar-link">Errors & Logging</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/middleware.html" class="sidebar-link">Middleware</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/csrf.html" class="sidebar-link">CSRF Protection</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/controllers.html" class="sidebar-link">Controllers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/requests.html" class="sidebar-link">HTTP Requests</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/responses.html" class="sidebar-link">HTTP Responses</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/views.html" class="sidebar-link">Views</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/session.html" class="sidebar-link">HTTP Session</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/validation.html" class="sidebar-link">Validation</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                      <li><h3>Frontend</h3></li>
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/blade.html" class="sidebar-link">Blade Templates</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/localization.html" class="sidebar-link">Localization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/frontend.html" class="sidebar-link">JavaScript & CSS Scaffolding</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/mix.html" class="sidebar-link">Compiling Assets (Laravel Mix)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Security</h3></li>
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/authentication.html" class="sidebar-link">Authentication</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/passport.html" class="sidebar-link">API Authentication (Passport)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/authorization.html" class="sidebar-link">Authorization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/encryption.html" class="sidebar-link">Encryption</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/hashing.html" class="sidebar-link">Hashing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/passwords.html" class="sidebar-link">Resetting Passwords</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Digging Deeper</h3></li>
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/artisan.html" class="sidebar-link">Artisan Console</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/queues.html" class="sidebar-link">Queues</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/scheduling.html" class="sidebar-link">Task Scheduling</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/packages.html" class="sidebar-link">Package Development</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/broadcasting.html" class="sidebar-link">Broadcasting</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/cache.html" class="sidebar-link">Cache</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/collections.html" class="sidebar-link">Collections</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/events.html" class="sidebar-link">Events</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/filesystem.html" class="sidebar-link">File Storage</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/helpers.html" class="sidebar-link">helpers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/mail.html" class="sidebar-link">Mail</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/notifications.html" class="sidebar-link">Notifications</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Database</h3></li>
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/database.html" class="sidebar-link">Database Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/queries.html" class="sidebar-link">Database Query Builder</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/pagination.html" class="sidebar-link">Database Pagination</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/migrations.html" class="sidebar-link">Database Migrations</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/seeding.html" class="sidebar-link">Database Seeding</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/redis.html" class="sidebar-link">Redis</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Eloquent ORM</h3></li>
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/eloquent.html" class="sidebar-link">Eloquent Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/eloquent-relationships.html" class="sidebar-link">Eloquent Relationships</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/eloquent-collections.html" class="sidebar-link">Eloquent Collections</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/eloquent-mutators.html" class="sidebar-link">Eloquent Mutators</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/eloquent-serialization.html" class="sidebar-link">Eloquent Serialization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Testing</h3></li>
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/testing.html" class="sidebar-link">Testing Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/http-tests.html" class="sidebar-link">HTTP Tests</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/dusk.html" class="sidebar-link">Browser Tests (Laravel Dusk)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/database-testing.html" class="sidebar-link">Database Testing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/mocking.html" class="sidebar-link">Mocking</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/redirects.html" class="sidebar-link">redirect</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Official Packages</h3></li>
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/billing.html" class="sidebar-link">Laravel Cashier</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/envoy.html" class="sidebar-link">Envoy Task Runner</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/laravel/5-4/scout.html" class="sidebar-link">Laravel Scout</a>
                </li>
            
            
        </ul>
    </div>
</div>


<div class="content laravel 5.4 with-sidebar ">
    
      

    
    
      <h1>Upgrade Guide</h1>
    
    <ul>
<li><a href="#upgrade-5.4.0">Upgrading To 5.4.0 From 5.3</a></li>
</ul>
<p><a name="upgrade-5.4.0"></a></p>
<h2 id="Upgrading-To-5-4-0-From-5-3"><a href="#Upgrading-To-5-4-0-From-5-3" class="headerlink" title="Upgrading To 5.4.0 From 5.3"></a>Upgrading To 5.4.0 From 5.3</h2><h4 id="Estimated-Upgrade-Time-1-2-Hours"><a href="#Estimated-Upgrade-Time-1-2-Hours" class="headerlink" title="Estimated Upgrade Time: 1-2 Hours"></a>Estimated Upgrade Time: 1-2 Hours</h4><blockquote>
<p>{note} We attempt to document every possible breaking change. Since some of these breaking changes are in obscure parts of the framework only a portion of these changes may actually affect your application.</p>
</blockquote>
<h3 id="Updating-Dependencies"><a href="#Updating-Dependencies" class="headerlink" title="Updating Dependencies"></a>Updating Dependencies</h3><p>Update your <code>laravel/framework</code> dependency to <code>5.4.*</code> in your <code>composer.json</code> file. In addition, you should update your <code>phpunit/phpunit</code> dependency to <code>~5.7</code>.</p>
<h4 id="Removing-Compiled-Services-File"><a href="#Removing-Compiled-Services-File" class="headerlink" title="Removing Compiled Services File"></a>Removing Compiled Services File</h4><p>If it exists, you may delete the <code>bootstrap/cache/compiled.php</code> file. It is no longer used by the framework.</p>
<h4 id="Flushing-The-Cache"><a href="#Flushing-The-Cache" class="headerlink" title="Flushing The Cache"></a>Flushing The Cache</h4><p>After upgrading all packages, you should run <code>php artisan view:clear</code> to avoid Blade errors related to the removal of <code>Illuminate\View\Factory::getFirstLoop()</code>. In addition, you may need to run <code>php artisan route:clear</code> to flush the route cache.</p>
<h4 id="Laravel-Cashier"><a href="#Laravel-Cashier" class="headerlink" title="Laravel Cashier"></a>Laravel Cashier</h4><p>Laravel Cashier is already compatible with Laravel 5.4.</p>
<h4 id="Laravel-Passport"><a href="#Laravel-Passport" class="headerlink" title="Laravel Passport"></a>Laravel Passport</h4><p>Laravel Passport <code>2.0.0</code> has been released to provide compatibility with Laravel 5.4 and the <a href="https://github.com/mzabriskie/axios" target="_blank" rel="external">Axios</a> JavaScript library. If you are upgrading from Laravel 5.3 and using the pre-built Passport Vue components, you should make sure the Axios library is globally available to your application as <code>axios</code>.</p>
<h4 id="Laravel-Scout"><a href="#Laravel-Scout" class="headerlink" title="Laravel Scout"></a>Laravel Scout</h4><p>Laravel Scout <code>3.0.0</code> has been released to provide compatibility with Laravel 5.4.</p>
<h4 id="Laravel-Socialite"><a href="#Laravel-Socialite" class="headerlink" title="Laravel Socialite"></a>Laravel Socialite</h4><p>Laravel Socialite <code>3.0.0</code> has been released to provide compatibility with Laravel 5.4.</p>
<h4 id="Laravel-Tinker"><a href="#Laravel-Tinker" class="headerlink" title="Laravel Tinker"></a>Laravel Tinker</h4><p>In order to continue using the <code>tinker</code> Artisan command, you should also install the <code>laravel/tinker</code> package:</p>
<pre><code>composer require laravel/tinker
</code></pre><p>Once the package has been installed, you should add <code>Laravel\Tinker\TinkerServiceProvider::class</code> to the <code>providers</code> array in your <code>config/app.php</code> configuration file.</p>
<h4 id="Guzzle"><a href="#Guzzle" class="headerlink" title="Guzzle"></a>Guzzle</h4><p>Laravel 5.4 requires Guzzle 6.0 or greater.</p>
<h3 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h3><h4 id="The-getPolicyFor-Method"><a href="#The-getPolicyFor-Method" class="headerlink" title="The getPolicyFor Method"></a>The <code>getPolicyFor</code> Method</h4><p>Previous, when calling the <code>Gate::getPolicyFor($class)</code> method, an exception was thrown if no policy could be found. Now, the method will return <code>null</code> if no policy is found for the given class. If you call this method directly, make sure you refactor your code to check for <code>null</code>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$policy = Gate::getPolicyFor($class);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($policy) &#123;</div><div class="line">    <span class="comment">// code that was previously in the try block</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// code that was previously in the catch block</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Blade"><a href="#Blade" class="headerlink" title="Blade"></a>Blade</h3><h4 id="section-Escaping"><a href="#section-Escaping" class="headerlink" title="@section Escaping"></a><code>@section</code> Escaping</h4><p>In Laravel 5.4, inline content passed to a section is automatically escaped:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">@section(<span class="string">'title'</span>, $content)</div></pre></td></tr></table></figure></p>
<p>If you would like to render unescaped content in a section, you must declare the section using the traditional “long form” style:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">@section(<span class="string">'title'</span>)</div><div class="line">    &#123;!! $content !!&#125;</div><div class="line">@stop</div></pre></td></tr></table></figure></p>
<h3 id="Bootstrappers"><a href="#Bootstrappers" class="headerlink" title="Bootstrappers"></a>Bootstrappers</h3><p>If you are manually overriding the <code>$bootstrappers</code> array on your HTTP or Console kernel, you should rename the <code>DetectEnvironment</code> entry to <code>LoadEnvironmentVariables</code> and remove <code>ConfigureLogging</code>.</p>
<h3 id="Broadcasting"><a href="#Broadcasting" class="headerlink" title="Broadcasting"></a>Broadcasting</h3><h4 id="Channel-Model-Binding"><a href="#Channel-Model-Binding" class="headerlink" title="Channel Model Binding"></a>Channel Model Binding</h4><p>When defining channel name placeholders in Laravel 5.3, the <code>*</code> character is used. In Laravel 5.4, you should define these placeholders using <code>{foo}</code> style placeholders, like routes:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Broadcast::channel(<span class="string">'App.User.&#123;userId&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($user, $userId)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (int) $user-&gt;id === (int) $userId;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><h4 id="The-every-Method"><a href="#The-every-Method" class="headerlink" title="The every Method"></a>The <code>every</code> Method</h4><p>The behavior of the <code>every</code> method has been moved to the <code>nth</code> method to match the method name defined by Lodash.</p>
<h4 id="The-random-Method"><a href="#The-random-Method" class="headerlink" title="The random Method"></a>The <code>random</code> Method</h4><p>Calling <code>$collection-&gt;random(1)</code> will now return a new collection instance with one item. Previously, this would return a single object. This method will only return a single object if no arguments are supplied.</p>
<h3 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h3><h4 id="Aliasing-Via-bind-instance"><a href="#Aliasing-Via-bind-instance" class="headerlink" title="Aliasing Via bind / instance"></a>Aliasing Via <code>bind</code> / <code>instance</code></h4><p>In previous Laravel releases, you could pass an array as the first parameter to the <code>bind</code> or <code>instance</code> methods to register an alias:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$container-&gt;bind([<span class="string">'foo'</span> =&gt; FooContract::class], <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'foo'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>However, this behavior has been removed in Laravel 5.4. To register an alias, you should now use the <code>alias</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$container-&gt;alias(FooContract::class, <span class="string">'foo'</span>);</div></pre></td></tr></table></figure></p>
<h4 id="Binding-Classes-With-Leading-Slashes"><a href="#Binding-Classes-With-Leading-Slashes" class="headerlink" title="Binding Classes With Leading Slashes"></a>Binding Classes With Leading Slashes</h4><p>Binding classes into the container with leading slashes is no longer supported. This feature required a significant amount of string formatting calls to be made within the container. Instead, simply register your bindings without a leading slash:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$container-&gt;bind(<span class="string">'Class\Name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">$container-&gt;bind(ClassName::class, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="make-Method-Parameters"><a href="#make-Method-Parameters" class="headerlink" title="make Method Parameters"></a><code>make</code> Method Parameters</h4><p>The container’s <code>make</code> method no longer accepts a second array of parameters. This feature typically indicates a code smell. Typically, you can always construct the object in another way that is more intuitive.</p>
<h4 id="Resolving-Callbacks"><a href="#Resolving-Callbacks" class="headerlink" title="Resolving Callbacks"></a>Resolving Callbacks</h4><p>The container’s <code>resolving</code> and <code>afterResolving</code> method now must be provided a class name or binding key as the first argument to the method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$container-&gt;resolving(<span class="string">'Class\Name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($instance)</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">$container-&gt;afterResolving(<span class="string">'Class\Name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($instance)</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="share-Method-Removed"><a href="#share-Method-Removed" class="headerlink" title="share Method Removed"></a><code>share</code> Method Removed</h4><p>The <code>share</code> method has been removed from the container. This was a legacy method that has not been documented in several years. If you are using this method, you should begin using the <code>singleton</code> method instead:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$container-&gt;singleton(<span class="string">'foo'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'foo'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><h4 id="The-Illuminate-Console-AppNamespaceDetectorTrait-Trait"><a href="#The-Illuminate-Console-AppNamespaceDetectorTrait-Trait" class="headerlink" title="The Illuminate\Console\AppNamespaceDetectorTrait Trait"></a>The <code>Illuminate\Console\AppNamespaceDetectorTrait</code> Trait</h4><p>If you are directly referencing the <code>Illuminate\Console\AppNamespaceDetectorTrait</code> trait, update your code to reference <code>Illuminate\Console\DetectsApplicationNamespace</code> instead.</p>
<h3 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h3><h4 id="Custom-Connections"><a href="#Custom-Connections" class="headerlink" title="Custom Connections"></a>Custom Connections</h4><p>If you were previously binding a service container binding for a <code>db.connection.{driver-name}</code> key in order to resolve a custom database connection instance, you should now use the <code>Illuminate\Database\Connection::resolverFor</code> method in the <code>register</code> method of your <code>AppServiceProvider</code>:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Connection</span>;</div><div class="line"></div><div class="line">Connection::resolverFor(<span class="string">'driver-name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($connection, $database, $prefix, $config)</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="Fetch-Mode"><a href="#Fetch-Mode" class="headerlink" title="Fetch Mode"></a>Fetch Mode</h4><p>Laravel no longer includes the ability to customize the PDO “fetch mode” from your configuration files. Instead, <code>PDO::FETCH_OBJ</code> is always used. If you would still like to customize the fetch mode for your application you may listen for the new <code>Illuminate\Database\Events\StatementPrepared</code> event:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Event::listen(StatementPrepared::class, <span class="function"><span class="keyword">function</span> <span class="params">($event)</span> </span>&#123;</div><div class="line">    $event-&gt;statement-&gt;setFetchMode(...);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Eloquent"><a href="#Eloquent" class="headerlink" title="Eloquent"></a>Eloquent</h3><h4 id="Date-Casts"><a href="#Date-Casts" class="headerlink" title="Date Casts"></a>Date Casts</h4><p>The <code>date</code> cast now converts the column to a <code>Carbon</code> object and calls the <code>startOfDay</code> method on the object. If you would like to preserve the time portion of the date, you should use the <code>datetime</code> cast.</p>
<h4 id="Foreign-Key-Conventions"><a href="#Foreign-Key-Conventions" class="headerlink" title="Foreign Key Conventions"></a>Foreign Key Conventions</h4><p>If the foreign key is not explicitly specified when defining a relationship, Eloquent will now use the table name and primary key name for the related model to build the foreign key. For the vast majority of applications, this is not a change of behavior. For example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">user</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(User::class);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Just like previous Laravel releases, this relationship will typically use <code>user_id</code> as the foreign key. However, the behavior could be different from previous releases if you are overriding the <code>getKeyName</code> method of the <code>User</code> model. For example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getKeyName</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'key'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>When this is the case, Laravel will now respect your customization and determine the foreign key column name is <code>user_key</code> instead of <code>user_id</code>.</p>
<h4 id="BelongsToMany-setJoin"><a href="#BelongsToMany-setJoin" class="headerlink" title="BelongsToMany setJoin"></a>BelongsToMany <code>setJoin</code></h4><p>The <code>setJoin</code> method has been renamed to <code>performJoin</code>.</p>
<h4 id="Has-One-Many-createMany"><a href="#Has-One-Many-createMany" class="headerlink" title="Has One / Many createMany"></a>Has One / Many <code>createMany</code></h4><p>The <code>createMany</code> method of a <code>hasOne</code> or <code>hasMany</code> relationship now returns a collection object instead of an array.</p>
<h4 id="Related-Model-Connections"><a href="#Related-Model-Connections" class="headerlink" title="Related Model Connections"></a>Related Model Connections</h4><p>Related models will now use the same connection as the parent model. For example, if you execute a query like:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">User::on(<span class="string">'example'</span>)-&gt;with(<span class="string">'posts'</span>);</div></pre></td></tr></table></figure></p>
<p>Eloquent will query the posts table on the <code>example</code> connection instead of the default database connection. If you want to read the <code>posts</code> relationship from the default connection, you should to explicitly set the model’s connection to your application’s default connection.</p>
<h4 id="The-chunk-Method"><a href="#The-chunk-Method" class="headerlink" title="The chunk Method"></a>The <code>chunk</code> Method</h4><p>The query builder <code>chunk</code> method now requires an <code>orderBy</code> clause, which provides consistency with the <code>each</code> method. An exception will be thrown if an <code>orderBy</code> clause is not supplied. For example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">DB::table(<span class="string">'users'</span>)-&gt;orderBy(<span class="string">'id'</span>)-&gt;chunk(<span class="number">100</span>, <span class="function"><span class="keyword">function</span> <span class="params">($users)</span> </span>&#123;</div><div class="line">    <span class="keyword">foreach</span> ($users <span class="keyword">as</span> $user) &#123;</div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>The Eloquent query builder <code>chunk</code> method will automatically apply an <code>orderBy</code> clause on the model’s primary key if one is not supplied.</p>
<h4 id="The-create-amp-forceCreate-Methods"><a href="#The-create-amp-forceCreate-Methods" class="headerlink" title="The create &amp; forceCreate Methods"></a>The <code>create</code> &amp; <code>forceCreate</code> Methods</h4><p>The <code>Model::create</code> &amp; <code>Model::forceCreate</code> methods have been moved to the <code>Illuminate\Database\Eloquent\Builder</code> class in order to provide better support for creating models on multiple connections. However, if you are extending these methods in your own models, you will need to modify your implementation to call the <code>create</code> method on the builder. For example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">(array $attributes = [])</span></span></div><div class="line">&#123;</div><div class="line">    $model = <span class="keyword">static</span>::query()-&gt;create($attributes);</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> $model;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="The-hydrate-Method"><a href="#The-hydrate-Method" class="headerlink" title="The hydrate Method"></a>The <code>hydrate</code> Method</h4><p>If you are currently passing a custom connection name to this method, you should now use the <code>on</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">User::on(<span class="string">'connection'</span>)-&gt;hydrate($records);</div></pre></td></tr></table></figure></p>
<h4 id="hydrateRaw-Method"><a href="#hydrateRaw-Method" class="headerlink" title="hydrateRaw Method"></a><code>hydrateRaw</code> Method</h4><p>The <code>Model::hydrateRaw</code> method has been renamed to <code>fromQuery</code>. If you are passing a custom connection name to this method, you should now use the <code>on</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">User::on(<span class="string">'connection'</span>)-&gt;fromQuery(<span class="string">'...'</span>);</div></pre></td></tr></table></figure></p>
<h4 id="The-whereKey-Method"><a href="#The-whereKey-Method" class="headerlink" title="The whereKey Method"></a>The <code>whereKey</code> Method</h4><p>The <code>whereKey($id)</code> method will now add a “where” clause for the given primary key value. Previously, this would fall into the dynamic “where” clause builder and add a “where” clause for the “key” column. If you used the <code>whereKey</code> method to dynamically add a condition for the <code>key</code> column you should now use <code>where(&#39;key&#39;, ...)</code> instead.</p>
<h4 id="The-factory-Helper"><a href="#The-factory-Helper" class="headerlink" title="The factory Helper"></a>The <code>factory</code> Helper</h4><p>Calling <code>factory(User::class, 1)-&gt;make()</code> or <code>factory(User::class, 1)-&gt;create()</code> will now return a collection with one item. Previously, this would return a single model. This method will only return a single model if the amount is not supplied.</p>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><h4 id="Contract-Changes"><a href="#Contract-Changes" class="headerlink" title="Contract Changes"></a>Contract Changes</h4><p>If you are manually implementing the <code>Illuminate\Contracts\Events\Dispatcher</code> interface in your application or package, you should rename the <code>fire</code> method to <code>dispatch</code>.</p>
<h4 id="Event-Priority"><a href="#Event-Priority" class="headerlink" title="Event Priority"></a>Event Priority</h4><p>Support for event handler “priorities” has been removed. This undocumented feature typically indicates an abuse of the event feature. Instead, consider using a series of synchronous method calls. Alternatively, you may dispatch a new event from within the handler of another event in order to ensure that a given event’s handler fires after an unrelated handler.</p>
<h4 id="Wildcard-Event-Handler-Signatures"><a href="#Wildcard-Event-Handler-Signatures" class="headerlink" title="Wildcard Event Handler Signatures"></a>Wildcard Event Handler Signatures</h4><p>Wildcard event handlers now receive the event name as their first argument and the array of event data as their second argument. The <code>Event::firing</code> method has been removed:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Event::listen(<span class="string">'*'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($eventName, array $data)</span> </span>&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="The-kernel-handled-Event"><a href="#The-kernel-handled-Event" class="headerlink" title="The kernel.handled Event"></a>The <code>kernel.handled</code> Event</h4><p>The <code>kernel.handled</code> event is now an object based event using the <code>Illuminate\Foundation\Http\Events\RequestHandled</code> class.</p>
<h4 id="The-locale-changed-Event"><a href="#The-locale-changed-Event" class="headerlink" title="The locale.changed Event"></a>The <code>locale.changed</code> Event</h4><p>The <code>locale.changed</code> event is now an object based event using the <code>Illuminate\Foundation\Events\LocaleUpdated</code> class.</p>
<h4 id="The-illuminate-log-Event"><a href="#The-illuminate-log-Event" class="headerlink" title="The illuminate.log Event"></a>The <code>illuminate.log</code> Event</h4><p>The <code>illuminate.log</code> event is now an object based event using the <code>Illuminate\Log\Events\MessageLogged</code> class.</p>
<h3 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h3><p>The <code>Illuminate\Http\Exception\HttpResponseException</code> has been renamed to <code>Illuminate\Http\Exceptions\HttpResponseException</code>. Note that <code>Exceptions</code> is now plural. Likewise, the <code>Illuminate\Http\Exception\PostTooLargeException</code> has been renamed to <code>Illuminate\Http\Exceptions\PostTooLargeException</code>.</p>
<h3 id="Mail"><a href="#Mail" class="headerlink" title="Mail"></a>Mail</h3><h4 id="Class-method-Syntax"><a href="#Class-method-Syntax" class="headerlink" title="Class@method Syntax"></a><code>Class@method</code> Syntax</h4><p>Sending mail using <code>Class@method</code> syntax is no longer supported. For example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Mail::send(<span class="string">'view.name'</span>, $data, <span class="string">'Class@send'</span>);</div></pre></td></tr></table></figure></p>
<p>If you are sending mail in this way you should convert these calls to <a href="/mk/laravel/mail.html">mailables</a>.</p>
<h4 id="New-Configuration-Options"><a href="#New-Configuration-Options" class="headerlink" title="New Configuration Options"></a>New Configuration Options</h4><p>In order to provide support for Laravel 5.4’s new Markdown mail components, you should add the following block of configuration to the bottom of your <code>mail</code> configuration file:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="string">'markdown'</span> =&gt; [</div><div class="line">    <span class="string">'theme'</span> =&gt; <span class="string">'default'</span>,</div><div class="line"></div><div class="line">    <span class="string">'paths'</span> =&gt; [</div><div class="line">        resource_path(<span class="string">'views/vendor/mail'</span>),</div><div class="line">    ],</div><div class="line">],</div></pre></td></tr></table></figure></p>
<h4 id="Queueing-Mail-With-Closures"><a href="#Queueing-Mail-With-Closures" class="headerlink" title="Queueing Mail With Closures"></a>Queueing Mail With Closures</h4><p>In order to queue mail, you now must use a <a href="/mk/laravel/mail.html">mailable</a>. Queuing mail using the <code>Mail::queue</code> and <code>Mail::later</code> methods no longer supports using Closures to configure the mail message. This feature required the use of special libraries to serialize Closures since PHP does not natively support this feature.</p>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><h4 id="Improved-Clustering-Support"><a href="#Improved-Clustering-Support" class="headerlink" title="Improved Clustering Support"></a>Improved Clustering Support</h4><p>Laravel 5.4 introduces improved Redis cluster support. If you are using Redis clusters, you should place your cluster connections inside of a <code>clusters</code> configuration option in the Redis portion of your <code>config/database.php</code> configuration file:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="string">'redis'</span> =&gt; [</div><div class="line"></div><div class="line">    <span class="string">'client'</span> =&gt; <span class="string">'predis'</span>,</div><div class="line"></div><div class="line">    <span class="string">'options'</span> =&gt; [</div><div class="line">        <span class="string">'cluster'</span> =&gt; <span class="string">'redis'</span>,</div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="string">'clusters'</span> =&gt; [</div><div class="line">        <span class="string">'default'</span> =&gt; [</div><div class="line">            [</div><div class="line">                <span class="string">'host'</span> =&gt; env(<span class="string">'REDIS_HOST'</span>, <span class="string">'127.0.0.1'</span>),</div><div class="line">                <span class="string">'password'</span> =&gt; env(<span class="string">'REDIS_PASSWORD'</span>, <span class="keyword">null</span>),</div><div class="line">                <span class="string">'port'</span> =&gt; env(<span class="string">'REDIS_PORT'</span>, <span class="number">6379</span>),</div><div class="line">                <span class="string">'database'</span> =&gt; <span class="number">0</span>,</div><div class="line">            ],</div><div class="line">        ],</div><div class="line">    ],</div><div class="line"></div><div class="line">],</div></pre></td></tr></table></figure></p>
<h3 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h3><h4 id="Post-Size-Middleware"><a href="#Post-Size-Middleware" class="headerlink" title="Post Size Middleware"></a>Post Size Middleware</h4><p>The class <code>Illuminate\Foundation\Http\Middleware\VerifyPostSize</code> has been renamed to <code>Illuminate\Foundation\Http\Middleware\ValidatePostSize</code>.</p>
<h4 id="The-middleware-Method"><a href="#The-middleware-Method" class="headerlink" title="The middleware Method"></a>The <code>middleware</code> Method</h4><p>The <code>middleware</code> method of the <code>Illuminate\Routing\Router</code> class has been renamed to <code>aliasMiddleware()</code>. It is likely that most applications never call this method manually, as it is typically only called by the HTTP kernel to register route-level middleware defined in the <code>$routeMiddleware</code> array.</p>
<h4 id="Route-Methods"><a href="#Route-Methods" class="headerlink" title="Route Methods"></a><code>Route</code> Methods</h4><p>The <code>getUri</code> method of the <code>Illuminate\Routing\Route</code> class has been removed. You should use the <code>uri</code> method instead.</p>
<p>The <code>getMethods</code> method of the <code>Illuminate\Routing\Route</code> class has been removed. You should use the <code>methods</code> method instead.</p>
<p>The <code>getParameter</code> method of the <code>Illuminate\Routing\Route</code> class has been removed. You should use the <code>parameter</code> method instead.</p>
<p>The <code>getPath</code> method of the <code>Illuminate\Routing\Route</code> class has been removed. You should use the <code>uri</code> method instead.</p>
<h3 id="Sessions"><a href="#Sessions" class="headerlink" title="Sessions"></a>Sessions</h3><h4 id="Symfony-Compatibility"><a href="#Symfony-Compatibility" class="headerlink" title="Symfony Compatibility"></a>Symfony Compatibility</h4><p>Laravel’s session handlers no longer implements Symfony’s <code>SessionInterface</code>. Implementing this interface required us to implement extraneous features that were not needed by the framework. Instead, a new <code>Illuminate\Contracts\Session\Session</code> interface has been defined and may be used instead. The following code changes should also be applied:</p>
<p>All calls to the <code>-&gt;set()</code> method should be changed to <code>-&gt;put()</code>. Typically, Laravel applications would never call the <code>set</code> method since it has never been documented within the Laravel documentation. However, it is included here out of caution.</p>
<p>All calls to the <code>-&gt;getToken()</code> method should be changed to <code>-&gt;token()</code>.</p>
<p>All calls to the <code>$request-&gt;setSession()</code> method should be changed to <code>setLaravelSession()</code>.</p>
<h3 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h3><p>Laravel 5.4’s testing layer has been re-written to be simpler and lighter out of the box. If you would like to continue using the testing layer present in Laravel 5.3, you may install the <code>laravel/browser-kit-testing</code> <a href="https://github.com/laravel/browser-kit-testing" target="_blank" rel="external">package</a> into your application. This package provides full compatibility with the Laravel 5.3 testing layer. In fact, you can run the Laravel 5.4 testing layer side-by-side with the Laravel 5.3 testing layer.</p>
<p>In order to allow Laravel to autoload any new tests you generate using the Laravel 5.4 test generators, you should add the <code>Tests</code> namespace to your <code>composer.json</code> file’s <code>autoload-dev</code> block:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="string">"psr-4"</span>: &#123;</div><div class="line">    <span class="string">"Tests\\"</span>: <span class="string">"tests/"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Running-Laravel-5-3-amp-5-4-Tests-In-A-Single-Application"><a href="#Running-Laravel-5-3-amp-5-4-Tests-In-A-Single-Application" class="headerlink" title="Running Laravel 5.3 &amp; 5.4 Tests In A Single Application"></a>Running Laravel 5.3 &amp; 5.4 Tests In A Single Application</h4><p>First install the <code>laravel/browser-kit-testing</code> package:</p>
<pre><code>composer require laravel/browser-kit-testing --dev
</code></pre><p>Once the package has been installed, create a copy of your <code>tests/TestCase.php</code> file and save it to your <code>tests</code> directory as <code>BrowserKitTestCase.php</code>. Then, modify the file to extend the <code>Laravel\BrowserKitTesting\TestCase</code> class. Once you have done this, you should have two base test classes in your <code>tests</code> directory: <code>TestCase.php</code> and <code>BrowserKitTestCase.php</code>. In order for your <code>BrowserKitTestCase</code> class to be properly loaded, you may need to add it to your <code>composer.json</code> file:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="string">"autoload-dev"</span>: &#123;</div><div class="line">    <span class="string">"classmap"</span>: [</div><div class="line">        <span class="string">"tests/TestCase.php"</span>,</div><div class="line">        <span class="string">"tests/BrowserKitTestCase.php"</span></div><div class="line">    ]</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>Tests written on Laravel 5.3 will extend the <code>BrowserKitTestCase</code> class while any new tests that use the Laravel 5.4 testing layer will extend the <code>TestCase</code> class. Your <code>BrowserKitTestCase</code> class should look like the following:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Console</span>\<span class="title">Kernel</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Laravel</span>\<span class="title">BrowserKitTesting</span>\<span class="title">TestCase</span> <span class="title">as</span> <span class="title">BaseTestCase</span>;</div><div class="line"></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BrowserKitTestCase</span> <span class="keyword">extends</span> <span class="title">BaseTestCase</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The base URL of the application.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> string</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> $baseUrl = <span class="string">'http://localhost'</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Creates the application.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> \Illuminate\Foundation\Application</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createApplication</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        $app = <span class="keyword">require</span> <span class="keyword">__DIR__</span>.<span class="string">'/../bootstrap/app.php'</span>;</div><div class="line"></div><div class="line">        $app-&gt;make(Kernel::class)-&gt;bootstrap();</div><div class="line"></div><div class="line">        <span class="keyword">return</span> $app;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Once you have created this class, make sure to update all of your tests to extend your new <code>BrowserKitTestCase</code> class. This will allow all of your tests written on Laravel 5.3 to continue running on Laravel 5.4. If you choose, you can slowly begin to port them over to the new <a href="/docs/5.4/http-tests">Laravel 5.4 test syntax</a> or <a href="/docs/5.4/dusk">Laravel Dusk</a>.</p>
<blockquote>
<p>{note} If you are writing new tests and want them to use the Laravel 5.4 testing layer, make sure to extend the <code>TestCase</code> class.</p>
</blockquote>
<h4 id="Installing-Dusk-In-An-Upgraded-Application"><a href="#Installing-Dusk-In-An-Upgraded-Application" class="headerlink" title="Installing Dusk In An Upgraded Application"></a>Installing Dusk In An Upgraded Application</h4><p>If you would like to install Laravel Dusk into an application that has been upgraded from Laravel 5.3, first install it via Composer:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">composer <span class="keyword">require</span> laravel/dusk</div></pre></td></tr></table></figure></p>
<p>Next, you will need to create a <code>CreatesApplication</code> trait in your <code>tests</code> directory. This trait is responsible for creating fresh application instances for test cases. The trait should look like the following:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Console</span>\<span class="title">Kernel</span>;</div><div class="line"></div><div class="line"><span class="keyword">trait</span> CreatesApplication</div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Creates the application.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> \Illuminate\Foundation\Application</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createApplication</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        $app = <span class="keyword">require</span> <span class="keyword">__DIR__</span>.<span class="string">'/../bootstrap/app.php'</span>;</div><div class="line"></div><div class="line">        $app-&gt;make(Kernel::class)-&gt;bootstrap();</div><div class="line"></div><div class="line">        <span class="keyword">return</span> $app;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>{note} If you have namespaced your tests and are using the PSR-4 autoloading standard to load your <code>tests</code> directory, you should place the <code>CreatesApplication</code> trait under the appropriate namespace.</p>
</blockquote>
<p>Once you have completed these preparatory steps, you can follow the normal <a href="/mk/laravel/dusk.html#installation">Dusk installation instructions</a>.</p>
<h4 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h4><p>The Laravel 5.4 test class no longer manually forces <code>putenv(&#39;APP_ENV=testing&#39;)</code> for each test. Instead, the framework utilizes the <code>APP_ENV</code> variable from the loaded <code>.env</code> file.</p>
<h4 id="Event-Fake"><a href="#Event-Fake" class="headerlink" title="Event Fake"></a>Event Fake</h4><p>The <code>Event</code> fake’s <code>assertFired</code> method should be updated to <code>assertDispatched</code>, and the <code>assertNotFired</code> method should be updated to <code>assertNotDispatched</code>. The method’s signatures have not been changed.</p>
<h4 id="Mail-Fake"><a href="#Mail-Fake" class="headerlink" title="Mail Fake"></a>Mail Fake</h4><p>The <code>Mail</code> fake has been greatly simplified for the Laravel 5.4 release. Instead of using the <code>assertSentTo</code> method, you should now simply use the <code>assertSent</code> method and utilize the <code>hasTo</code>, <code>hasCc</code>, etc. helper methods within your callback:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Mail::assertSent(MailableName::class, <span class="function"><span class="keyword">function</span> <span class="params">($mailable)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> $mailable-&gt;hasTo(<span class="string">'email@example.com'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Translation"><a href="#Translation" class="headerlink" title="Translation"></a>Translation</h3><h4 id="Inf-Placeholder"><a href="#Inf-Placeholder" class="headerlink" title="{Inf} Placeholder"></a><code>{Inf}</code> Placeholder</h4><p>If you are using the <code>{Inf}</code> placeholder for pluralizing your translation strings, you should update your translation strings to use the <code>*</code> character instead:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">&#123;<span class="number">0</span>&#125; First Message|&#123;<span class="number">1</span>,*&#125; Second Message</div></pre></td></tr></table></figure></p>
<h3 id="URL-Generation"><a href="#URL-Generation" class="headerlink" title="URL Generation"></a>URL Generation</h3><h4 id="The-forceSchema-Method"><a href="#The-forceSchema-Method" class="headerlink" title="The forceSchema Method"></a>The <code>forceSchema</code> Method</h4><p>The <code>forceSchema</code> method of the <code>Illuminate\Routing\UrlGenerator</code> class has been renamed to <code>forceScheme</code>.</p>
<h3 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h3><h4 id="Date-Format-Validation"><a href="#Date-Format-Validation" class="headerlink" title="Date Format Validation"></a>Date Format Validation</h4><p>Date format validation is now more strict and supports the placeholders present within the documentation for the PHP <a href="http://php.net/manual/en/function.date.php" target="_blank" rel="external">date function</a>. In previous releases of Laravel, the timezone placeholder <code>P</code> would accept all timezone formats; however, in Laravel 5.4 each timezone format has a unique placeholder as per the PHP documentation.</p>
<h4 id="Method-Names"><a href="#Method-Names" class="headerlink" title="Method Names"></a>Method Names</h4><p>The <code>addError</code> method has been renamed to <code>addFailure</code>. In addition, the <code>doReplacements</code> method has been renamed to <code>makeReplacements</code>. Typically, these changes will only be relevant if you are extending the <code>Validator</code> class.</p>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><p>We also encourage you to view the changes in the <code>laravel/laravel</code> <a href="https://github.com/laravel/laravel" target="_blank" rel="external">GitHub repository</a>. While many of these changes are not required, you may wish to keep these files in sync with your application. Some of these changes will be covered in this upgrade guide, but others, such as changes to configuration files or comments, will not be. You can easily view the changes with the <a href="https://github.com/laravel/laravel/compare/5.3...master" target="_blank" rel="external">Github comparison tool</a> and choose which updates are important to you.</p>

    

    

    <div class="footer">
      Powered by:
    <!--  <a href="https://github.com/vuejs/vuejs.org/blob/master/src/laravel/5-4/upgrade.md" target="_blank">
        Edit this page on Github!
</a>-->
<a href="https://twitter.com/code4mk">@code4mk</a>
    </div>
</div>


                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/search.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>

      <!-- <script>
        [
          '#search-query-nav',
          '#search-query-sidebar'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'mk'
          docsearch({

            apiKey: '9d7525f5e23afd159b7fc3a65ae4c1f1',
            indexName: 'hellolaravel',
            inputSelector: search-form,
            algoliaOptions: { facetFilters: ["version:" + version]


       <script type="text/javascript"> docsearch({
apiKey: '9d7525f5e23afd159b7fc3a65ae4c1f1',
indexName: 'hellolaravel',
inputSelector: selector,
debug: true // Set debug to true if you want to inspect the dropdown
});
</script> -->

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
        <script id="dsq-count-scr" src="//hellolaravel.disqus.com/count.js" async></script>

        <script src="//static.getclicky.com/js" type="text/javascript"></script>
        <script type="text/javascript">try{ clicky.init(101038415); }catch(e){}</script>
          <script type="text/javascript" src="https://vuejs-tips.github.io/vuex-cheatsheet/client.001800a6.js"></script>
    </body>
</html>
