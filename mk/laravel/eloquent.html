
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Eloquent Getting Started — Hello Laravel</title>
        <meta charset="utf-8">
        <meta name="description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Eloquent Getting Started — hello-laravel">
        <meta property="og:description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta property="og:image" content="https://hellolaravel.org//images/title.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Eloquent Getting Started — hello-laravel">
        <meta name="twitter:description" content="Hello laravel - Now time for laravel , Bangla full documentation and laravel related tutorial and tips resource avaiable on hello laravel">
        <meta name="twitter:image" content="https://hellolaravel.org/images/logo.png">

        <link rel="icon" href="/images/title.png" type="image/x-icon">

        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "laravel 5.4"</script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-91320539-2', 'hellolaravel.org');
          ga('send', 'pageview');
        </script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logog.gif">
    <span>@HelloLaravel</span>
  </a>
  <ul id="nav">
    <li>
 <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>

</li>
<li><a href="/mk/laravel-bn/" class="nav-link">laravel Bangla</a></li>

<li><a href="/mk/tutorial/" class="nav-link">Tutorials</a></li>
<li><a href="https://github.com/laravel24">Packges</a></li>

<!--<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Packages</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
      <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
      <li><a href="https://github.com/vuejs-templates" class="nav-link" target="_blank">Templates</a></li>
    </ul></li>
    <li><h4>News</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Blog</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">Jobs</a></li>
    </ul></li>
    <li><h4>Core Plugins</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Official Repos</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>
-->
<li class="nav-dropdown-container language">
  <a class="nav-link">Official</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://laravel.com/" class="nav-link" target="">Laravel</a></li>
    <li><a href="https://laracasts.com/" class="nav-link" target="_blank">Laracast</a></li>
    <li><a href="https://laravel-news.com/blog" class="nav-link" target="_blank">Laravel News</a></li>
    <li><a href="https://larajobs.com/#/" class="nav-link" target="_blank">Larajob</a></li>
      <li><a href="http://cheats.jesse-obrien.ca/" class="nav-link" target="_blank">Cheat Sheet</a></li>
  </ul>
</li>



<li>
  <a href="https://medium.com/hello-laravel" target="_blank" class="nav-link shop">Blog</a>
  <span class="new-label">NEW!</span>
</li>

  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
 <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>

</li>
<li><a href="/mk/laravel-bn/" class="nav-link">laravel Bangla</a></li>

<li><a href="/mk/tutorial/" class="nav-link">Tutorials</a></li>
<li><a href="https://github.com/laravel24">Packges</a></li>

<!--<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Packages</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
      <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
      <li><a href="https://github.com/vuejs-templates" class="nav-link" target="_blank">Templates</a></li>
    </ul></li>
    <li><h4>News</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Blog</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">Jobs</a></li>
    </ul></li>
    <li><h4>Core Plugins</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Official Repos</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>
-->
<li class="nav-dropdown-container language">
  <a class="nav-link">Official</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://laravel.com/" class="nav-link" target="">Laravel</a></li>
    <li><a href="https://laracasts.com/" class="nav-link" target="_blank">Laracast</a></li>
    <li><a href="https://laravel-news.com/blog" class="nav-link" target="_blank">Laravel News</a></li>
    <li><a href="https://larajobs.com/#/" class="nav-link" target="_blank">Larajob</a></li>
      <li><a href="http://cheats.jesse-obrien.ca/" class="nav-link" target="_blank">Cheat Sheet</a></li>
  </ul>
</li>



<li>
  <a href="https://medium.com/hello-laravel" target="_blank" class="nav-link shop">Blog</a>
  <span class="new-label">NEW!</span>
</li>

    </ul>
    <div class="list">
        <div class="main-sponsor">
            <span>Platinum Sponsor</span><br>
            <a href="https://themeour.com" target="_blank" class="logo">
                <img src="/images/stdlib.png">
            </a>
        </div>
        <a class="become-backer" href="https://themeour.com">
            Touch Our Service
        </a>
        <h2>
            Laravel 5.4
            
                <!--<select class="version-select">
                    <option value="SELF" selected>2.0</option>
                    <option value="v1">1.0</option>
                    <option value="012">0.12</option>
                    <option value="011">0.11</option>
            </select>-->
            
        </h2>
        <hr>
        <ul class="menu-root">
            
                
                
                
                    
                      <li><h3>Awesome Laravel</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/index.html" class="sidebar-link">Awesome Laravel (Chirag Gude)</a>
                </li>
            
                
                
                
                    
                    
                      <li><h3>Prologue</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/releases.html" class="sidebar-link">Release Notes</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/upgrade.html" class="sidebar-link">Upgrade Guide</a>
                </li>
            
                
                
                
                    
                    
                    
                      <li><h3>Getting Started</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/installation.html" class="sidebar-link">Installation</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/configuration.html" class="sidebar-link">Configuration</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/structure.html" class="sidebar-link">Directory Structure</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/homestead.html" class="sidebar-link">Laravel Homestead</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/valet.html" class="sidebar-link">valet</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                      <li><h3>Architecture Concepts</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/lifecycle.html" class="sidebar-link">Request Lifecycle</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/container.html" class="sidebar-link">Service Container</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/providers.html" class="sidebar-link">Service Providers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/facades.html" class="sidebar-link">Facades</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                      <li><h3>The Basics</h3></li>
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/routing.html" class="sidebar-link">Routing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/errors.html" class="sidebar-link">Errors & Logging</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/middleware.html" class="sidebar-link">Middleware</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/csrf.html" class="sidebar-link">CSRF Protection</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/controllers.html" class="sidebar-link">Controllers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/requests.html" class="sidebar-link">HTTP Requests</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/responses.html" class="sidebar-link">HTTP Responses</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/views.html" class="sidebar-link">Views</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/session.html" class="sidebar-link">HTTP Session</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/validation.html" class="sidebar-link">Validation</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                      <li><h3>Frontend</h3></li>
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/blade.html" class="sidebar-link">Blade Templates</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/localization.html" class="sidebar-link">Localization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/frontend.html" class="sidebar-link">JavaScript & CSS Scaffolding</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/mix.html" class="sidebar-link">Compiling Assets (Laravel Mix)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Security</h3></li>
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/authentication.html" class="sidebar-link">Authentication</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/passport.html" class="sidebar-link">API Authentication (Passport)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/authorization.html" class="sidebar-link">Authorization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/encryption.html" class="sidebar-link">Encryption</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/hashing.html" class="sidebar-link">Hashing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/passwords.html" class="sidebar-link">Resetting Passwords</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Digging Deeper</h3></li>
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/artisan.html" class="sidebar-link">Artisan Console</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/queues.html" class="sidebar-link">Queues</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/scheduling.html" class="sidebar-link">Task Scheduling</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/packages.html" class="sidebar-link">Package Development</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/broadcasting.html" class="sidebar-link">Broadcasting</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/cache.html" class="sidebar-link">Cache</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/collections.html" class="sidebar-link">Collections</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/events.html" class="sidebar-link">Events</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/filesystem.html" class="sidebar-link">File Storage</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/helpers.html" class="sidebar-link">helpers</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/mail.html" class="sidebar-link">Mail</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/notifications.html" class="sidebar-link">Notifications</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Database</h3></li>
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/database.html" class="sidebar-link">Database Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/queries.html" class="sidebar-link">Database Query Builder</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/pagination.html" class="sidebar-link">Database Pagination</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/migrations.html" class="sidebar-link">Database Migrations</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/seeding.html" class="sidebar-link">Database Seeding</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/redis.html" class="sidebar-link">Redis</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Eloquent ORM</h3></li>
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/eloquent.html" class="sidebar-link current">Eloquent Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/eloquent-relationships.html" class="sidebar-link">Eloquent Relationships</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/eloquent-collections.html" class="sidebar-link">Eloquent Collections</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/eloquent-mutators.html" class="sidebar-link">Eloquent Mutators</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/eloquent-serialization.html" class="sidebar-link">Eloquent Serialization</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Testing</h3></li>
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/testing.html" class="sidebar-link">Testing Getting Started</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/http-tests.html" class="sidebar-link">HTTP Tests</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/dusk.html" class="sidebar-link">Browser Tests (Laravel Dusk)</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/database-testing.html" class="sidebar-link">Database Testing</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/mocking.html" class="sidebar-link">Mocking</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/redirects.html" class="sidebar-link">redirect</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                      <li><h3>Official Packages</h3></li>
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/billing.html" class="sidebar-link">Laravel Cashier</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/envoy.html" class="sidebar-link">Envoy Task Runner</a>
                </li>
            
                
                
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    

                    <!-- Move cookbook sections here once they have -->
                    <!-- at least one recipe -->
                
                <li>
                    <a href="/mk/laravel/scout.html" class="sidebar-link">Laravel Scout</a>
                </li>
            
            
        </ul>
    </div>
</div>


<div class="content laravel 5.4 with-sidebar ">
    
      

    
    
      <h1>Eloquent Getting Started</h1>
    
    <p><a name="introduction"></a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The Eloquent ORM included with Laravel provides a beautiful, simple ActiveRecord implementation for working with your database. Each database table has a corresponding “Model” which is used to interact with that table. Models allow you to query for data in your tables, as well as insert new records into the table.</p>
<p>Before getting started, be sure to configure a database connection in <code>config/database.php</code>. For more information on configuring your database, check out <a href="/mk/laravel/database.html#configuration">the documentation</a>.</p>
<p><a name="defining-models"></a></p>
<h2 id="Defining-Models"><a href="#Defining-Models" class="headerlink" title="Defining Models"></a>Defining Models</h2><p>To get started, let’s create an Eloquent model. Models typically live in the <code>app</code> directory, but you are free to place them anywhere that can be auto-loaded according to your <code>composer.json</code> file. All Eloquent models extend <code>Illuminate\Database\Eloquent\Model</code> class.</p>
<p>The easiest way to create a model instance is using the <code>make:model</code> <a href="/mk/laravel/artisan.html">Artisan command</a>:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">php artisan make:model User</div></pre></td></tr></table></figure></p>
<p>If you would like to generate a <a href="/mk/laravel/migrations.html">database migration</a> when you generate the model, you may use the <code>--migration</code> or <code>-m</code> option:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">php artisan make:model User --migration</div><div class="line"></div><div class="line">php artisan make:model User -m</div></pre></td></tr></table></figure></p>
<p><a name="eloquent-model-conventions"></a></p>
<h3 id="Eloquent-Model-Conventions"><a href="#Eloquent-Model-Conventions" class="headerlink" title="Eloquent Model Conventions"></a>Eloquent Model Conventions</h3><p>Now, let’s look at an example <code>Flight</code> model, which we will use to retrieve and store information from our <code>flights</code> database table:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Table-Names"><a href="#Table-Names" class="headerlink" title="Table Names"></a>Table Names</h4><p>Note that we did not tell Eloquent which table to use for our <code>Flight</code> model. By convention, the “snake case”, plural name of the class will be used as the table name unless another name is explicitly specified. So, in this case, Eloquent will assume the <code>Flight</code> model stores records in the <code>flights</code> table. You may specify a custom table by defining a <code>table</code> property on your model:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The table associated with the model.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> string</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $table = <span class="string">'my_flights'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Primary-Keys"><a href="#Primary-Keys" class="headerlink" title="Primary Keys"></a>Primary Keys</h4><p>Eloquent will also assume that each table has a primary key column named <code>id</code>. You may define a <code>$primaryKey</code> property to override this convention.</p>
<p>In addition, Eloquent assumes that the primary key is an incrementing integer value, which means that by default the primary key will be cast to an <code>int</code> automatically. If you wish to use a non-incrementing or a non-numeric primary key you must set the public <code>$incrementing</code> property on your model to <code>false</code>.</p>
<h4 id="Timestamps"><a href="#Timestamps" class="headerlink" title="Timestamps"></a>Timestamps</h4><p>By default, Eloquent expects <code>created_at</code> and <code>updated_at</code> columns to exist on your tables.  If you do not wish to have these columns automatically managed by Eloquent, set the <code>$timestamps</code> property on your model to <code>false</code>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Indicates if the model should be timestamped.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> bool</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> $timestamps = <span class="keyword">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you need to customize the format of your timestamps, set the <code>$dateFormat</code> property on your model. This property determines how date attributes are stored in the database, as well as their format when the model is serialized to an array or JSON:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The storage format of the model's date columns.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> string</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $dateFormat = <span class="string">'U'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you need to customize the names of the columns used to store the timestamps, you may set the <code>CREATED_AT</code> and <code>UPDATED_AT</code> constants in your model:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">const</span> CREATED_AT = <span class="string">'creation_date'</span>;</div><div class="line">    <span class="keyword">const</span> UPDATED_AT = <span class="string">'last_update'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Database-Connection"><a href="#Database-Connection" class="headerlink" title="Database Connection"></a>Database Connection</h4><p>By default, all Eloquent models will use the default database connection configured for your application. If you would like to specify a different connection for the model, use the <code>$connection</code> property:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The connection name for the model.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> string</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $connection = <span class="string">'connection-name'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a name="retrieving-models"></a></p>
<h2 id="Retrieving-Models"><a href="#Retrieving-Models" class="headerlink" title="Retrieving Models"></a>Retrieving Models</h2><p>Once you have created a model and <a href="/mk/laravel/migrations.html#writing-migrations">its associated database table</a>, you are ready to start retrieving data from your database. Think of each Eloquent model as a powerful <a href="/mk/laravel/queries">query builder</a> allowing you to fluently query the database table associated with the model. For example:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Flight</span>;</div><div class="line"></div><div class="line">$flights = App\Flight::all();</div><div class="line"></div><div class="line"><span class="keyword">foreach</span> ($flights <span class="keyword">as</span> $flight) &#123;</div><div class="line">    <span class="keyword">echo</span> $flight-&gt;name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Adding-Additional-Constraints"><a href="#Adding-Additional-Constraints" class="headerlink" title="Adding Additional Constraints"></a>Adding Additional Constraints</h4><p>The Eloquent <code>all</code> method will return all of the results in the model’s table. Since each Eloquent model serves as a <a href="/mk/laravel/queries.html">query builder</a>, you may also add constraints to queries, and then use the <code>get</code> method to retrieve the results:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flights = App\Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)</div><div class="line">               -&gt;orderBy(<span class="string">'name'</span>, <span class="string">'desc'</span>)</div><div class="line">               -&gt;take(<span class="number">10</span>)</div><div class="line">               -&gt;get();</div></pre></td></tr></table></figure>
<blockquote>
<p>{tip} Since Eloquent models are query builders, you should review all of the methods available on the <a href="/mk/laravel/queries.html">query builder</a>. You may use any of these methods in your Eloquent queries.</p>
</blockquote>
<p><a name="collections"></a></p>
<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>For Eloquent methods like <code>all</code> and <code>get</code> which retrieve multiple results, an instance of <code>Illuminate\Database\Eloquent\Collection</code> will be returned. The <code>Collection</code> class provides <a href="/mk/laravel/eloquent-collections.html#available-methods">a variety of helpful methods</a> for working with your Eloquent results:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flights = $flights-&gt;reject(<span class="function"><span class="keyword">function</span> <span class="params">($flight)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> $flight-&gt;cancelled;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>Of course, you may also simply loop over the collection like an array:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">foreach</span> ($flights <span class="keyword">as</span> $flight) &#123;</div><div class="line">    <span class="keyword">echo</span> $flight-&gt;name;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a name="chunking-results"></a></p>
<h3 id="Chunking-Results"><a href="#Chunking-Results" class="headerlink" title="Chunking Results"></a>Chunking Results</h3><p>If you need to process thousands of Eloquent records, use the <code>chunk</code> command. The <code>chunk</code> method will retrieve a “chunk” of Eloquent models, feeding them to a given <code>Closure</code> for processing. Using the <code>chunk</code> method will conserve memory when working with large result sets:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Flight::chunk(<span class="number">200</span>, <span class="function"><span class="keyword">function</span> <span class="params">($flights)</span> </span>&#123;</div><div class="line">    <span class="keyword">foreach</span> ($flights <span class="keyword">as</span> $flight) &#123;</div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>The first argument passed to the method is the number of records you wish to receive per “chunk”. The Closure passed as the second argument will be called for each chunk that is retrieved from the database. A database query will be executed to retrieve each chunk of records passed to the Closure.</p>
<h4 id="Using-Cursors"><a href="#Using-Cursors" class="headerlink" title="Using Cursors"></a>Using Cursors</h4><p>The <code>cursor</code> method allows you to iterate through your database records using a cursor, which will only execute a single query. When processing large amounts of data, the <code>cursor</code> method may be used to greatly reduce your memory usage:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">foreach</span> (Flight::where(<span class="string">'foo'</span>, <span class="string">'bar'</span>)-&gt;cursor() <span class="keyword">as</span> $flight) &#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a name="retrieving-single-models"></a></p>
<h2 id="Retrieving-Single-Models-Aggregates"><a href="#Retrieving-Single-Models-Aggregates" class="headerlink" title="Retrieving Single Models / Aggregates"></a>Retrieving Single Models / Aggregates</h2><p>Of course, in addition to retrieving all of the records for a given table, you may also retrieve single records using <code>find</code> or <code>first</code>. Instead of returning a collection of models, these methods return a single model instance:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Retrieve a model by its primary key...</span></div><div class="line">$flight = App\Flight::find(<span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="comment">// Retrieve the first model matching the query constraints...</span></div><div class="line">$flight = App\Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;first();</div></pre></td></tr></table></figure></p>
<p>You may also call the <code>find</code> method with an array of primary keys, which will return a collection of the matching records:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flights = App\Flight::find([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</div></pre></td></tr></table></figure></p>
<h4 id="Not-Found-Exceptions"><a href="#Not-Found-Exceptions" class="headerlink" title="Not Found Exceptions"></a>Not Found Exceptions</h4><p>Sometimes you may wish to throw an exception if a model is not found. This is particularly useful in routes or controllers. The <code>findOrFail</code> and <code>firstOrFail</code> methods will retrieve the first result of the query; however, if no result is found, a <code>Illuminate\Database\Eloquent\ModelNotFoundException</code> will be thrown:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$model = App\Flight::findOrFail(<span class="number">1</span>);</div><div class="line"></div><div class="line">$model = App\Flight::where(<span class="string">'legs'</span>, <span class="string">'&gt;'</span>, <span class="number">100</span>)-&gt;firstOrFail();</div></pre></td></tr></table></figure></p>
<p>If the exception is not caught, a <code>404</code> HTTP response is automatically sent back to the user. It is not necessary to write explicit checks to return <code>404</code> responses when using these methods:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Route::get(<span class="string">'/api/flights/&#123;id&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($id)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> App\Flight::findOrFail($id);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><a name="retrieving-aggregates"></a></p>
<h3 id="Retrieving-Aggregates"><a href="#Retrieving-Aggregates" class="headerlink" title="Retrieving Aggregates"></a>Retrieving Aggregates</h3><p>You may also use the <code>count</code>, <code>sum</code>, <code>max</code>, and other <a href="/mk/laravel/queries.html#aggregates">aggregate methods</a> provided by the <a href="/mk/laravel/queries">query builder</a>. These methods return the appropriate scalar value instead of a full model instance:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$count = App\Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;count();</div><div class="line"></div><div class="line">$max = App\Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)-&gt;max(<span class="string">'price'</span>);</div></pre></td></tr></table></figure></p>
<p><a name="inserting-and-updating-models"></a></p>
<h2 id="Inserting-amp-Updating-Models"><a href="#Inserting-amp-Updating-Models" class="headerlink" title="Inserting &amp; Updating Models"></a>Inserting &amp; Updating Models</h2><p><a name="inserts"></a></p>
<h3 id="Inserts"><a href="#Inserts" class="headerlink" title="Inserts"></a>Inserts</h3><p>To create a new record in the database, simply create a new model instance, set attributes on the model, then call the <code>save</code> method:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Flight</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">Controller</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlightController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Create a new flight instance.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  Request  $request</div><div class="line">     * <span class="doctag">@return</span> Response</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span><span class="params">(Request $request)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// Validate the request...</span></div><div class="line"></div><div class="line">        $flight = <span class="keyword">new</span> Flight;</div><div class="line"></div><div class="line">        $flight-&gt;name = $request-&gt;name;</div><div class="line"></div><div class="line">        $flight-&gt;save();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In this example, we simply assign the <code>name</code> parameter from the incoming HTTP request to the <code>name</code> attribute of the <code>App\Flight</code> model instance. When we call the <code>save</code> method, a record will be inserted into the database. The <code>created_at</code> and <code>updated_at</code> timestamps will automatically be set when the <code>save</code> method is called, so there is no need to set them manually.</p>
<p><a name="updates"></a></p>
<h3 id="Updates"><a href="#Updates" class="headerlink" title="Updates"></a>Updates</h3><p>The <code>save</code> method may also be used to update models that already exist in the database. To update a model, you should retrieve it, set any attributes you wish to update, and then call the <code>save</code> method. Again, the <code>updated_at</code> timestamp will automatically be updated, so there is no need to manually set its value:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flight = App\Flight::find(<span class="number">1</span>);</div><div class="line"></div><div class="line">$flight-&gt;name = <span class="string">'New Flight Name'</span>;</div><div class="line"></div><div class="line">$flight-&gt;save();</div></pre></td></tr></table></figure></p>
<h4 id="Mass-Updates"><a href="#Mass-Updates" class="headerlink" title="Mass Updates"></a>Mass Updates</h4><p>Updates can also be performed against any number of models that match a given query. In this example, all flights that are <code>active</code> and have a <code>destination</code> of <code>San Diego</code> will be marked as delayed:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">App\Flight::where(<span class="string">'active'</span>, <span class="number">1</span>)</div><div class="line">          -&gt;where(<span class="string">'destination'</span>, <span class="string">'San Diego'</span>)</div><div class="line">          -&gt;update([<span class="string">'delayed'</span> =&gt; <span class="number">1</span>]);</div></pre></td></tr></table></figure></p>
<p>The <code>update</code> method expects an array of column and value pairs representing the columns that should be updated.</p>
<blockquote>
<p>{note} When issuing a mass update via Eloquent, the <code>saved</code> and <code>updated</code> model events will not be fired for the updated models. This is because the models are never actually retrieved when issuing a mass update.</p>
</blockquote>
<p><a name="mass-assignment"></a></p>
<h3 id="Mass-Assignment"><a href="#Mass-Assignment" class="headerlink" title="Mass Assignment"></a>Mass Assignment</h3><p>You may also use the <code>create</code> method to save a new model in a single line. The inserted model instance will be returned to you from the method. However, before doing so, you will need to specify either a <code>fillable</code> or <code>guarded</code> attribute on the model, as all Eloquent models protect against mass-assignment by default.</p>
<p>A mass-assignment vulnerability occurs when a user passes an unexpected HTTP parameter through a request, and that parameter changes a column in your database you did not expect. For example, a malicious user might send an <code>is_admin</code> parameter through an HTTP request, which is then passed into your model’s <code>create</code> method, allowing the user to escalate themselves to an administrator.</p>
<p>So, to get started, you should define which model attributes you want to make mass assignable. You may do this using the <code>$fillable</code> property on the model. For example, let’s make the <code>name</code> attribute of our <code>Flight</code> model mass assignable:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The attributes that are mass assignable.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> array</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $fillable = [<span class="string">'name'</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Once we have made the attributes mass assignable, we can use the <code>create</code> method to insert a new record in the database. The <code>create</code> method returns the saved model instance:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">    $flight = App\Flight::create([<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>]);</div><div class="line"></div><div class="line"><span class="keyword">If</span> you already have a model instance, you may <span class="keyword">use</span> <span class="title">the</span> `<span class="title">fill</span>` <span class="title">method</span> <span class="title">to</span> <span class="title">populate</span> <span class="title">it</span> <span class="title">with</span> <span class="title">an</span> <span class="title">array</span> <span class="title">of</span> <span class="title">attributes</span>:</div><div class="line"></div><div class="line">    $<span class="title">flight</span>-&gt;<span class="title">fill</span>(['<span class="title">name</span>' =&gt; '<span class="title">Flight</span> 22']);</div></pre></td></tr></table></figure></p>
<h4 id="Guarding-Attributes"><a href="#Guarding-Attributes" class="headerlink" title="Guarding Attributes"></a>Guarding Attributes</h4><p>While <code>$fillable</code> serves as a “white list” of attributes that should be mass assignable, you may also choose to use <code>$guarded</code>. The <code>$guarded</code> property should contain an array of attributes that you do not want to be mass assignable. All other attributes not in the array will be mass assignable. So, <code>$guarded</code> functions like a “black list”. Of course, you should use either <code>$fillable</code> or <code>$guarded</code> - not both. In the example below, all attributes <strong>except for <code>price</code></strong> will be mass assignable:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The attributes that aren't mass assignable.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> array</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $guarded = [<span class="string">'price'</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you would like to make all attributes mass assignable, you may define the <code>$guarded</code> property as an empty array:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * The attributes that aren't mass assignable.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@var</span> array</div><div class="line"> */</div><div class="line"><span class="keyword">protected</span> $guarded = [];</div></pre></td></tr></table></figure>
<p><a name="other-creation-methods"></a></p>
<h3 id="Other-Creation-Methods"><a href="#Other-Creation-Methods" class="headerlink" title="Other Creation Methods"></a>Other Creation Methods</h3><h4 id="firstOrCreate-firstOrNew"><a href="#firstOrCreate-firstOrNew" class="headerlink" title="firstOrCreate/ firstOrNew"></a><code>firstOrCreate</code>/ <code>firstOrNew</code></h4><p>There are two other methods you may use to create models by mass assigning attributes: <code>firstOrCreate</code> and <code>firstOrNew</code>. The <code>firstOrCreate</code> method will attempt to locate a database record using the given column / value pairs. If the model can not be found in the database, a record will be inserted with the given attributes.</p>
<p>The <code>firstOrNew</code> method, like <code>firstOrCreate</code> will attempt to locate a record in the database matching the given attributes. However, if a model is not found, a new model instance will be returned. Note that the model returned by <code>firstOrNew</code> has not yet been persisted to the database. You will need to call <code>save</code> manually to persist it:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Retrieve flight by name, or create it if it doesn't exist...</span></div><div class="line">$flight = App\Flight::firstOrCreate([<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>]);</div><div class="line"></div><div class="line"><span class="comment">// Retrieve flight by name, or create it with the name and delayed attributes...</span></div><div class="line">$flight = App\Flight::firstOrCreate(</div><div class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>], [<span class="string">'delayed'</span> =&gt; <span class="number">1</span>]</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// Retrieve by name, or instantiate...</span></div><div class="line">$flight = App\Flight::firstOrNew([<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>]);</div><div class="line"></div><div class="line"><span class="comment">// Retrieve by name, or instantiate with the name and delayed attributes...</span></div><div class="line">$flight = App\Flight::firstOrNew(</div><div class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Flight 10'</span>], [<span class="string">'delayed'</span> =&gt; <span class="number">1</span>]</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h4 id="updateOrCreate"><a href="#updateOrCreate" class="headerlink" title="updateOrCreate"></a><code>updateOrCreate</code></h4><p>You may also come across situations where you want to update an existing model or create a new model if none exists. Laravel provides an <code>updateOrCreate</code> method to do this in one step. Like the <code>firstOrCreate</code> method, <code>updateOrCreate</code> persists the model, so there’s no need to call <code>save()</code>:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// If there's a flight from Oakland to San Diego, set the price to $99.</span></div><div class="line"><span class="comment">// If no matching model exists, create one.</span></div><div class="line">$flight = App\Flight::updateOrCreate(</div><div class="line">    [<span class="string">'departure'</span> =&gt; <span class="string">'Oakland'</span>, <span class="string">'destination'</span> =&gt; <span class="string">'San Diego'</span>],</div><div class="line">    [<span class="string">'price'</span> =&gt; <span class="number">99</span>]</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p><a name="deleting-models"></a></p>
<h2 id="Deleting-Models"><a href="#Deleting-Models" class="headerlink" title="Deleting Models"></a>Deleting Models</h2><p>To delete a model, call the <code>delete</code> method on a model instance:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flight = App\Flight::find(<span class="number">1</span>);</div><div class="line"></div><div class="line">$flight-&gt;delete();</div></pre></td></tr></table></figure></p>
<h4 id="Deleting-An-Existing-Model-By-Key"><a href="#Deleting-An-Existing-Model-By-Key" class="headerlink" title="Deleting An Existing Model By Key"></a>Deleting An Existing Model By Key</h4><p>In the example above, we are retrieving the model from the database before calling the <code>delete</code> method. However, if you know the primary key of the model, you may delete the model without retrieving it. To do so, call the <code>destroy</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">App\Flight::destroy(<span class="number">1</span>);</div><div class="line"></div><div class="line">App\Flight::destroy([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</div><div class="line"></div><div class="line">App\Flight::destroy(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<h4 id="Deleting-Models-By-Query"><a href="#Deleting-Models-By-Query" class="headerlink" title="Deleting Models By Query"></a>Deleting Models By Query</h4><p>Of course, you may also run a delete statement on a set of models. In this example, we will delete all flights that are marked as inactive. Like mass updates, mass deletes will not fire any model events for the models that are deleted:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$deletedRows = App\Flight::where(<span class="string">'active'</span>, <span class="number">0</span>)-&gt;delete();</div></pre></td></tr></table></figure></p>
<blockquote>
<p>{note} When executing a mass delete statement via Eloquent, the <code>deleting</code> and <code>deleted</code> model events will not be fired for the deleted models. This is because the models are never actually retrieved when executing the delete statement.</p>
</blockquote>
<p><a name="soft-deleting"></a></p>
<h3 id="Soft-Deleting"><a href="#Soft-Deleting" class="headerlink" title="Soft Deleting"></a>Soft Deleting</h3><p>In addition to actually removing records from your database, Eloquent can also “soft delete” models. When models are soft deleted, they are not actually removed from your database. Instead, a <code>deleted_at</code> attribute is set on the model and inserted into the database. If a model has a non-null <code>deleted_at</code> value, the model has been soft deleted. To enable soft deletes for a model, use the <code>Illuminate\Database\Eloquent\SoftDeletes</code> trait on the model and add the <code>deleted_at</code> column to your <code>$dates</code> property:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">SoftDeletes</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">use</span> <span class="title">SoftDeletes</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The attributes that should be mutated to dates.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> array</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $dates = [<span class="string">'deleted_at'</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Of course, you should add the <code>deleted_at</code> column to your database table. The Laravel <a href="/mk/laravel/migrations.html">schema builder</a> contains a helper method to create this column:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">Schema::table(<span class="string">'flights'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($table)</span> </span>&#123;</div><div class="line">    $table-&gt;softDeletes();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>Now, when you call the <code>delete</code> method on the model, the <code>deleted_at</code> column will be set to the current date and time. And, when querying a model that uses soft deletes, the soft deleted models will automatically be excluded from all query results.</p>
<p>To determine if a given model instance has been soft deleted, use the <code>trashed</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span> ($flight-&gt;trashed()) &#123;</div><div class="line">    <span class="comment">//</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a name="querying-soft-deleted-models"></a></p>
<h3 id="Querying-Soft-Deleted-Models"><a href="#Querying-Soft-Deleted-Models" class="headerlink" title="Querying Soft Deleted Models"></a>Querying Soft Deleted Models</h3><h4 id="Including-Soft-Deleted-Models"><a href="#Including-Soft-Deleted-Models" class="headerlink" title="Including Soft Deleted Models"></a>Including Soft Deleted Models</h4><p>As noted above, soft deleted models will automatically be excluded from query results. However, you may force soft deleted models to appear in a result set using the <code>withTrashed</code> method on the query:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flights = App\Flight::withTrashed()</div><div class="line">                -&gt;where(<span class="string">'account_id'</span>, <span class="number">1</span>)</div><div class="line">                -&gt;get();</div></pre></td></tr></table></figure></p>
<p>The <code>withTrashed</code> method may also be used on a <a href="/mk/laravel/eloquent-relationships.html">relationship</a> query:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flight-&gt;history()-&gt;withTrashed()-&gt;get();</div></pre></td></tr></table></figure></p>
<h4 id="Retrieving-Only-Soft-Deleted-Models"><a href="#Retrieving-Only-Soft-Deleted-Models" class="headerlink" title="Retrieving Only Soft Deleted Models"></a>Retrieving Only Soft Deleted Models</h4><p>The <code>onlyTrashed</code> method will retrieve <strong>only</strong> soft deleted models:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flights = App\Flight::onlyTrashed()</div><div class="line">                -&gt;where(<span class="string">'airline_id'</span>, <span class="number">1</span>)</div><div class="line">                -&gt;get();</div></pre></td></tr></table></figure></p>
<h4 id="Restoring-Soft-Deleted-Models"><a href="#Restoring-Soft-Deleted-Models" class="headerlink" title="Restoring Soft Deleted Models"></a>Restoring Soft Deleted Models</h4><p>Sometimes you may wish to “un-delete” a soft deleted model. To restore a soft deleted model into an active state, use the <code>restore</code> method on a model instance:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flight-&gt;restore();</div></pre></td></tr></table></figure></p>
<p>You may also use the <code>restore</code> method in a query to quickly restore multiple models. Again, like other “mass” operations, this will not fire any model events for the models that are restored:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">App\Flight::withTrashed()</div><div class="line">        -&gt;where(<span class="string">'airline_id'</span>, <span class="number">1</span>)</div><div class="line">        -&gt;restore();</div></pre></td></tr></table></figure></p>
<p>Like the <code>withTrashed</code> method, the <code>restore</code> method may also be used on <a href="/mk/laravel/eloquent-relationships.html">relationships</a>:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$flight-&gt;history()-&gt;restore();</div></pre></td></tr></table></figure></p>
<h4 id="Permanently-Deleting-Models"><a href="#Permanently-Deleting-Models" class="headerlink" title="Permanently Deleting Models"></a>Permanently Deleting Models</h4><p>Sometimes you may need to truly remove a model from your database. To permanently remove a soft deleted model from the database, use the <code>forceDelete</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Force deleting a single model instance...</span></div><div class="line">$flight-&gt;forceDelete();</div><div class="line"></div><div class="line"><span class="comment">// Force deleting all related models...</span></div><div class="line">$flight-&gt;history()-&gt;forceDelete();</div></pre></td></tr></table></figure></p>
<p><a name="query-scopes"></a></p>
<h2 id="Query-Scopes"><a href="#Query-Scopes" class="headerlink" title="Query Scopes"></a>Query Scopes</h2><p><a name="global-scopes"></a></p>
<h3 id="Global-Scopes"><a href="#Global-Scopes" class="headerlink" title="Global Scopes"></a>Global Scopes</h3><p>Global scopes allow you to add constraints to all queries for a given model. Laravel’s own <a href="#soft-deleting">soft delete</a> functionality utilizes global scopes to only pull “non-deleted” models from the database. Writing your own global scopes can provide a convenient, easy way to make sure every query for a given model receives certain constraints.</p>
<h4 id="Writing-Global-Scopes"><a href="#Writing-Global-Scopes" class="headerlink" title="Writing Global Scopes"></a>Writing Global Scopes</h4><p>Writing a global scope is simple. Define a class that implements the <code>Illuminate\Database\Eloquent\Scope</code> interface. This interface requires you to implement one method: <code>apply</code>. The <code>apply</code> method may add <code>where</code> constraints to the query as needed:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Scopes</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Scope</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Builder</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AgeScope</span> <span class="keyword">implements</span> <span class="title">Scope</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Apply the scope to a given Eloquent query builder.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  \Illuminate\Database\Eloquent\Builder  $builder</div><div class="line">     * <span class="doctag">@param</span>  \Illuminate\Database\Eloquent\Model  $model</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">apply</span><span class="params">(Builder $builder, Model $model)</span></span></div><div class="line">    &#123;</div><div class="line">        $builder-&gt;where(<span class="string">'age'</span>, <span class="string">'&gt;'</span>, <span class="number">200</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>{tip} There is not a predefined folder for scopes in a default Laravel application, so feel free to make your own <code>Scopes</code> folder within your Laravel application’s <code>app</code> directory.</p>
</blockquote>
<h4 id="Applying-Global-Scopes"><a href="#Applying-Global-Scopes" class="headerlink" title="Applying Global Scopes"></a>Applying Global Scopes</h4><p>To assign a global scope to a model, you should override a given model’s <code>boot</code> method and use the <code>addGlobalScope</code> method:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Scopes</span>\<span class="title">AgeScope</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The "booting" method of the model.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">parent</span>::boot();</div><div class="line"></div><div class="line">        <span class="keyword">static</span>::addGlobalScope(<span class="keyword">new</span> AgeScope);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>After adding the scope, a query to <code>User::all()</code> will produce the following SQL:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">select * from `users` where `age` &gt; <span class="number">200</span></div></pre></td></tr></table></figure></p>
<h4 id="Anonymous-Global-Scopes"><a href="#Anonymous-Global-Scopes" class="headerlink" title="Anonymous Global Scopes"></a>Anonymous Global Scopes</h4><p>Eloquent also allows you to define global scopes using Closures, which is particularly useful for simple scopes that do not warrant a separate class:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Builder</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The "booting" method of the model.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">parent</span>::boot();</div><div class="line"></div><div class="line">        <span class="keyword">static</span>::addGlobalScope(<span class="string">'age'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Builder $builder)</span> </span>&#123;</div><div class="line">            $builder-&gt;where(<span class="string">'age'</span>, <span class="string">'&gt;'</span>, <span class="number">200</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Removing-Global-Scopes"><a href="#Removing-Global-Scopes" class="headerlink" title="Removing Global Scopes"></a>Removing Global Scopes</h4><p>If you would like to remove a global scope for a given query, you may use the <code>withoutGlobalScope</code> method. The method accepts the class name of the global scope as its only argument:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">User::withoutGlobalScope(AgeScope::class)-&gt;get();</div></pre></td></tr></table></figure></p>
<p>If you would like to remove several or even all of the global scopes, you may use the <code>withoutGlobalScopes</code> method:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Remove all of the global scopes...</span></div><div class="line">User::withoutGlobalScopes()-&gt;get();</div><div class="line"></div><div class="line"><span class="comment">// Remove some of the global scopes...</span></div><div class="line">User::withoutGlobalScopes([</div><div class="line">    FirstScope::class, SecondScope::class</div><div class="line">])-&gt;get();</div></pre></td></tr></table></figure></p>
<p><a name="local-scopes"></a></p>
<h3 id="Local-Scopes"><a href="#Local-Scopes" class="headerlink" title="Local Scopes"></a>Local Scopes</h3><p>Local scopes allow you to define common sets of constraints that you may easily re-use throughout your application. For example, you may need to frequently retrieve all users that are considered “popular”. To define a scope, simply prefix an Eloquent model method with <code>scope</code>.</p>
<p>Scopes should always return a query builder instance:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Scope a query to only include popular users.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> \Illuminate\Database\Eloquent\Builder $query</div><div class="line">     * <span class="doctag">@return</span> \Illuminate\Database\Eloquent\Builder</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scopePopular</span><span class="params">($query)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> $query-&gt;where(<span class="string">'votes'</span>, <span class="string">'&gt;'</span>, <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Scope a query to only include active users.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> \Illuminate\Database\Eloquent\Builder $query</div><div class="line">     * <span class="doctag">@return</span> \Illuminate\Database\Eloquent\Builder</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scopeActive</span><span class="params">($query)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> $query-&gt;where(<span class="string">'active'</span>, <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Utilizing-A-Local-Scope"><a href="#Utilizing-A-Local-Scope" class="headerlink" title="Utilizing A Local Scope"></a>Utilizing A Local Scope</h4><p>Once the scope has been defined, you may call the scope methods when querying the model. However, you do not need to include the <code>scope</code> prefix when calling the method. You can even chain calls to various scopes, for example:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$users = App\User::popular()-&gt;active()-&gt;orderBy(<span class="string">'created_at'</span>)-&gt;get();</div></pre></td></tr></table></figure></p>
<h4 id="Dynamic-Scopes"><a href="#Dynamic-Scopes" class="headerlink" title="Dynamic Scopes"></a>Dynamic Scopes</h4><p>Sometimes you may wish to define a scope that accepts parameters. To get started, just add your additional parameters to your scope. Scope parameters should be defined after the <code>$query</code> parameter:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Scope a query to only include users of a given type.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> \Illuminate\Database\Eloquent\Builder $query</div><div class="line">     * <span class="doctag">@param</span> mixed $type</div><div class="line">     * <span class="doctag">@return</span> \Illuminate\Database\Eloquent\Builder</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scopeOfType</span><span class="params">($query, $type)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> $query-&gt;where(<span class="string">'type'</span>, $type);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Now, you may pass the parameters when calling the scope:<br><figure class="highlight php"><table><tr><td class="code"><pre><div class="line">$users = App\User::ofType(<span class="string">'admin'</span>)-&gt;get();</div></pre></td></tr></table></figure></p>
<p><a name="events"></a></p>
<h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><p>Eloquent models fire several events, allowing you to hook into the following points in a model’s lifecycle: <code>creating</code>, <code>created</code>, <code>updating</code>, <code>updated</code>, <code>saving</code>, <code>saved</code>, <code>deleting</code>, <code>deleted</code>, <code>restoring</code>, <code>restored</code>. Events allow you to easily execute code each time a specific model class is saved or updated in the database.</p>
<p>Whenever a new model is saved for the first time, the <code>creating</code> and <code>created</code> events will fire. If a model already existed in the database and the <code>save</code> method is called, the <code>updating</code> / <code>updated</code> events will fire. However, in both cases, the <code>saving</code> / <code>saved</code> events will fire.</p>
<p>To get started, define an <code>$events</code> property on your Eloquent model that maps various points of the Eloquent model’s lifecycle to your own <a href="/mk/laravel/events.html">event classes</a>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Events</span>\<span class="title">UserSaved</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Events</span>\<span class="title">UserDeleted</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Notifications</span>\<span class="title">Notifiable</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">User</span> <span class="title">as</span> <span class="title">Authenticatable</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">use</span> <span class="title">Notifiable</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * The event map for the model.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@var</span> array</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> $events = [</div><div class="line">        <span class="string">'saved'</span> =&gt; UserSaved::class,</div><div class="line">        <span class="string">'deleted'</span> =&gt; UserDeleted::class,</div><div class="line">    ];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a name="observers"></a></p>
<h3 id="Observers"><a href="#Observers" class="headerlink" title="Observers"></a>Observers</h3><p>If you are listening for many events on a given model, you may use observers to group all of your listeners into a single class. Observers classes have method names which reflect the Eloquent events you wish to listen for. Each of these methods receives the model as their only argument. Laravel does not include a default directory for observers, so you may create any directory you like to house your observer classes:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Observers</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">User</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserObserver</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Listen to the User created event.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  User  $user</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">created</span><span class="params">(User $user)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Listen to the User deleting event.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  User  $user</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deleting</span><span class="params">(User $user)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>To register an observer, use the <code>observe</code> method on the model you wish to observe. You may register observers in the <code>boot</code> method of one of your service providers. In this example, we’ll register the observer in the <code>AppServiceProvider</code>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Providers</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">User</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Observers</span>\<span class="title">UserObserver</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">ServiceProvider</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppServiceProvider</span> <span class="keyword">extends</span> <span class="title">ServiceProvider</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Bootstrap any application services.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        User::observe(UserObserver::class);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Register the service provider.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> void</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

    

    

    <div class="footer">

   <a href="https://github.com/hellolaravelbd/hellolaravel.org/blob/master/src/mk/laravel/eloquent.md" target="_blank">
        Edit this page on Github!
</a>This site is maintained by:
<a href="http://itnishi.com">Nishi IT Ltd.</a>
    </div>
</div>


                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/search.css">
        <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'v2'
          docsearch({
            appId: '',
            apiKey: '',
            indexName: '',
            inputSelector: selector,
            algoliaOptions: { facetFilters: ["version:" + version]





          }
          })
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
        <script id="dsq-count-scr" src="//hellolaravel.disqus.com/count.js" async></script>
    </body>
</html>
